# 右侧媒体组件重构说明

## 概述
将 `BluePage.vue` 中的右侧前景图片、视频、背景模糊图片及相关特效整合成一个独立组件 `RightMediaSection.vue`。

## 创建的组件

### RightMediaSection.vue
**位置**: `web-project/src/components/RightMediaSection.vue`

**功能**:
- 右侧模糊背景层（带动画效果）
- 雨滴粒子特效 Canvas
- 右侧前景图片（带视差效果）
- 视频容器（带视差效果和交互）
- 鼠标悬停判定和视差计算
- 图片/视频不透明度切换

**Props**:
- `mouseX`: Number - 鼠标X坐标
- `mouseY`: Number - 鼠标Y坐标
- `scrollY`: Number - 页面滚动位置

**包含的特效**:
- 雨滴粒子效果（useRainEffect）
- 背景模糊动画（rightBgDrift）
- 视差交互效果
- 鼠标悬停时的图片/视频切换

## BluePage.vue 的修改

### 移除的内容

**模板部分**:
- `rainCanvas` - 雨滴粒子Canvas
- `right-blur-bg` - 右侧模糊背景层
- `#background` - 右侧前景图片容器
- `#videoContainer` - 视频容器
- `right-media-area` - 右侧媒体区域包装容器

**脚本部分**:
- `rainCanvas` ref
- `videoElement` ref
- `bgRightLoaded`, `foreground1Loaded`, `videoLoaded`, `rainLoaded` 状态
- `useRainEffect` 相关逻辑
- 视频初始化和事件监听
- 右侧图片和视频的视差计算逻辑
- `targetX1`, `targetY1`, `targetXVideo`, `targetYVideo` 等变量
- `isHoveringImg1`, `isHoveringVideo`, `isHoveringRightArea` 等变量
- `imageOpacity`, `videoOpacity` 变量

**样式部分**:
- `#rainCanvas` 样式
- `.right-blur-bg` 样式及动画
- `#background` 样式及伪元素
- `#videoContainer` 样式及伪元素
- `.right-media-area` 样式
- 响应式设计中的相关引用

### 保留并修改的内容

**脚本部分**:
- `mouseX`, `mouseY`, `scrollY` 改为 ref 以传递给子组件
- 保留左侧图片（`#background2`）的视差逻辑
- 保留左侧相关的鼠标移动和滚动处理

**模板部分**:
- 新增 `<RightMediaSection>` 组件引用
- 传递 `mouseX`, `mouseY`, `scrollY` props

## 组件集成方式

在 `BluePage.vue` 中使用：

```vue
<RightMediaSection :mouseX="mouseX" :mouseY="mouseY" :scrollY="scrollY" />
```

## 组件特点

### 封装性
- 完全独立的右侧媒体展示逻辑
- 自管理的特效和动画
- 清晰的 props 接口

### 可维护性
- 代码组织更清晰
- 职责分离明确
- 便于独立测试和修改

### 性能
- 独立的动画循环
- 自管理的资源清理
- 不影响父组件性能

## 测试建议

1. **视差效果**: 移动鼠标检查右侧图片和视频的视差响应
2. **悬停交互**: 鼠标悬停在右侧图片上，检查图片/视频的淡入淡出效果
3. **雨滴特效**: 确认右侧雨滴粒子效果正常显示
4. **背景动画**: 检查右侧模糊背景的缓慢漂移动画
5. **视频播放**: 点击视频检查播放/暂停功能
6. **滚动效果**: 滚动页面检查视差滚动效果
7. **响应式**: 在不同屏幕尺寸下测试布局和动画

## 文件清单

### 新增文件
- `web-project/src/components/RightMediaSection.vue` - 右侧媒体组件

### 修改文件
- `web-project/src/views/BluePage.vue` - 主页面组件

## 版本信息

- 重构日期: 2025-11-04
- 重构原因: 代码组织优化，提高可维护性
- 影响范围: 右侧媒体展示区域


