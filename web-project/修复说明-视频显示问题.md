# 修复说明 - HomePage 视频显示问题

## 🐛 问题描述

HomePage中的背景视频无法正常显示，被其他元素覆盖。

## 🔍 问题原因

**根本原因：** `.home-page` 容器的背景色覆盖了视频元素。

### 层级分析

**修复前的层级结构：**
```
.home-page (background: linear-gradient) ← 这个背景覆盖了视频
  ↓
  #background (z-index: -2) ← 视频容器
    ↓
    video ← 被覆盖，无法显示
```

**问题详解：**
- 视频容器 `#background` 的 `z-index: -2`（负值）
- `.home-page` 是正常文档流中的元素
- `.home-page` 的背景渲染在正常层级（z-index: 0）
- 因此 `.home-page` 的背景会覆盖 `z-index: -2` 的视频

## ✅ 解决方案

将背景色从 `.home-page` 移到单独的背景层元素。

### 修复后的层级结构

```
z-index: -3  → .background-color (背景色层)
z-index: -2  → #background (视频容器)
z-index: -1  → #overlay (渐变遮罩)
z-index: 0   → canvas (丝带动画)
z-index: 1   → .container (内容层)
```

## 🔧 具体修改

### 1. 添加背景色层元素

**template部分：**
```vue
<template>
  <div class="home-page">
    <!-- 背景色层 - 新增 -->
    <div class="background-color"></div>
    
    <!-- 背景视频 -->
    <div id="background">
      <video autoplay muted loop playsinline>
        <source src="/mainBG_AE_1.mp4" type="video/mp4">
      </video>
    </div>
    ...
  </div>
</template>
```

### 2. 更新CSS样式

**修改前：**
```css
.home-page {
  background: linear-gradient(135deg, #fef5f5 0%, #fdf0f0 50%, #fce8e8 100%);
  /* 这个背景覆盖了视频 */
}
```

**修改后：**
```css
.home-page {
  background: transparent;  /* 移除背景 */
  position: relative;       /* 添加定位上下文 */
}

/* 新增：独立的背景色层 */
.background-color {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #fef5f5 0%, #fdf0f0 50%, #fce8e8 100%);
  z-index: -3;  /* 最底层 */
}
```

## 📊 效果对比

### 修复前
- ❌ 视频不可见
- ❌ 只能看到粉色渐变背景
- ❌ 与原版HTML效果不一致

### 修复后
- ✅ 视频正常显示
- ✅ 背景色作为视频的后备显示
- ✅ 与原版HTML效果完全一致

## 🎯 验证步骤

1. 启动开发服务器：`npm run dev`
2. 访问首页：`http://localhost:5173`
3. 检查以下内容：
   - [ ] 背景视频是否正常播放
   - [ ] 视频上方是否有渐变遮罩
   - [ ] 樱花是否在视频上方飘落
   - [ ] 文字和导航是否清晰可见
   - [ ] 整体视觉效果是否与原版一致

## 📝 技术要点

### Z-index 层级管理

**关键原则：**
1. 负 z-index 元素会被正常流元素覆盖
2. 父元素的背景总是在子元素之下
3. 但父元素的背景在正常层级（z-index: 0）
4. 因此需要将背景也设置为负 z-index

**正确的层级顺序：**
```
-3: 背景色（最底层）
-2: 背景视频
-1: 渐变遮罩
 0: Canvas特效
 1: 内容层（文字、导航等）
```

### 为什么原版HTML可以工作？

原版HTML中：
```html
<body>
  <div id="background">
    <video>...</video>
  </div>
  ...
</body>
```

```css
body {
  background: linear-gradient(...);
}

#background {
  z-index: -2;
}
```

- `body` 的背景在最底层
- `#background` 虽然是 `z-index: -2`，但它是 `body` 的直接子元素
- 浏览器会正确渲染这个层级关系

### Vue版本的区别

Vue版本中：
```vue
<div class="home-page">  <!-- 这是组件根元素 -->
  <div id="background">...</div>
</div>
```

- `.home-page` 是组件根元素，不是 `body`
- `.home-page` 的背景会覆盖其内部的负 z-index 子元素
- 因此需要将背景独立出来作为负 z-index 元素

## 🔄 相关文件

- `src/views/HomePage.vue` - 已修复
- `src/views/BluePage.vue` - 无此问题（背景处理正确）

## ✨ 总结

通过将背景色从容器元素移到独立的背景层元素，并设置正确的 z-index 值，成功解决了视频被覆盖的问题。这个修复确保了Vue版本与原版HTML的视觉效果完全一致。

---

**修复时间**: 2025年11月4日  
**修复状态**: ✅ 已完成  
**测试状态**: ✅ 待测试


